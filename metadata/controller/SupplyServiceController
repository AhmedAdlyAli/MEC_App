{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userAlias": "SupplyServiceController",
        "designer|userClassName": "SupplyServiceController"
    },
    "name": "MyController",
    "designerId": "d8a2aa82-54b8-4881-85df-6ce7ae4aa4af",
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "panel#SupplyServiceView1",
                "designer|params": [
                    "component",
                    "eOpts"
                ],
                "designer|targetType": "Ext.Panel",
                "fn": "onSupplyServiceView1Initialize",
                "implHandler": [
                    "",
                    "var me = this;",
                    "",
                    "",
                    "var url2 = Ext.Global.GetConfig('supplyWebServiceUrl')+ '/GetFamilyItemDetails';",
                    "",
                    "var requestData2 = {\"qid\":\"21463400042\", \"languageID\":\"2\", \"mobileDeviceID\":\"1231\"};",
                    "",
                    "",
                    "//Ext.AnimationHelper.ShowLoading();",
                    "",
                    "Ext.Ajax.request({",
                    "",
                    "    url : url2,",
                    "    method : 'POST',",
                    "    jsonData :requestData2,",
                    "    success : function (response) {",
                    "",
                    "        var json1 = Ext.util.JSON.decode(response.responseText);",
                    "        var json2 = Ext.util.JSON.decode(json1.d);",
                    "",
                    "",
                    "        var fsItems = me.getFsItems();",
                    "",
                    "",
                    "         Ext.each(json2.Data.Items, function(item){",
                    "",
                    "                fsItems.add(",
                    "",
                    "                    {",
                    "                        xtype: 'spinnerfield',",
                    "                        label: item.Name,",
                    "                        placeholder: item.Name,",
                    "                        value: item.AllocatedQty,",
                    "                        name: 'item-'+item.ItemID,",
                    "                        stepValue: 1,",
                    "                        minValue: 0,",
                    "                        maxValue:100,",
                    "                        listeners : {",
                    "                            spin : function(spinnerfield, newValue, direction, eOpts) {",
                    "                                if(newValue>item.AllocatedQty){",
                    "                                    this.setValue(item.AllocatedQty);",
                    "                                }",
                    "                            }",
                    "                        }",
                    "",
                    "",
                    "",
                    "                     }",
                    "",
                    "                );",
                    "",
                    "            });",
                    "",
                    "",
                    "",
                    "        Ext.AnimationHelper.HideLoading();",
                    "",
                    "",
                    "    },",
                    "    failure: function(request, resp) {",
                    "        alert(\"in failure\");",
                    "    }",
                    "});",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    ""
                ],
                "name": "initialize"
            },
            "name": "onSupplyServiceView1Initialize",
            "designerId": "8a6d8fd0-ef3f-4876-a07d-0bf55bc4ceb8"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "button#btnSupplyNext1",
                "designer|params": [
                    "button",
                    "e",
                    "eOpts"
                ],
                "designer|targetType": "Ext.Button",
                "fn": "onBtnSupplyNext1Tap",
                "implHandler": [
                    "",
                    "",
                    "var view = this.getSupplyServiceView1();",
                    "",
                    "",
                    "Ext.Viewport.getActiveItem().push({",
                    "    xtype: 'SupplyServiceView2',",
                    "    title:  Ext.Global.GetFixedTitle(),",
                    "    data: view.getValues()",
                    "});",
                    "",
                    "",
                    ""
                ],
                "name": "tap"
            },
            "name": "onBtnSupplyNext1Tap",
            "designerId": "b6627f29-ed00-48bb-a2f5-19e325092a38"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "lblFamilyCount",
                "selector": "#lblFamilyCount"
            },
            "name": "lblFamilyCount",
            "designerId": "befb1f3b-f155-454c-98a6-fc2d6fab2cd2"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "fsItems",
                "selector": "#fsItems"
            },
            "name": "fsItems",
            "designerId": "e2d70b72-db67-4a6d-9ce3-0c4024d31635"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "SupplyServiceView1",
                "selector": "SupplyServiceView1"
            },
            "name": "SupplyServiceView1",
            "designerId": "cfc0d26d-ac1a-44cb-832b-1070d77e24bb"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "SupplyServiceView2",
                "selector": "SupplyServiceView2"
            },
            "name": "SupplyServiceView2",
            "designerId": "35b09e41-a71c-45d4-89ac-38e07832db88"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "panel#SupplyServiceView2",
                "designer|params": [
                    "component",
                    "eOpts"
                ],
                "designer|targetType": "Ext.Panel",
                "fn": "onSupplyServiceView2Initialize",
                "implHandler": [
                    "",
                    "// initialize google maps",
                    "var view = component;",
                    "",
                    "var pnlMap = view.down('#pnlMap');",
                    "",
                    "Ext.Function.defer(function(){",
                    "",
                    "    var map = plugin.google.maps.Map.getMap(pnlMap.element.dom);",
                    "",
                    "    map.setClickable(true);",
                    "",
                    "",
                    "    map.getMyLocation(function(location){",
                    "",
                    "        //map.setMyLocationEnabled(true);",
                    "",
                    "        // alert(location.latLng.lat);",
                    "",
                    "        //map.setCenter(location.latLng);",
                    "",
                    "        map.animateCamera({",
                    "            'target': location.latLng,",
                    "            'tilt': 60,",
                    "            'zoom': 9,",
                    "            'bearing': 140",
                    "        });",
                    "",
                    "",
                    "    }, function(){",
                    "",
                    "        alert(\"error: \" + msg);",
                    "",
                    "    });",
                    "",
                    "",
                    "/*",
                    "",
                    "    // get dealers",
                    "",
                    "    var url = Ext.Global.GetConfig('supplyWebServiceUrl')+ '/GetNearbyDealers';",
                    "",
                    "",
                    "    var requestData =  {\"qid\":\"24263400239\", \"languageID\":\"2\",",
                    "                        \"mobileDeviceID\":\"1231\",",
                    "                        \"latitude\":location.lat,",
                    "                        \"longtitude\":location.lng};",
                    "",
                    "",
                    "",
                    "    Ext.AnimationHelper.ShowLoading();",
                    "",
                    "    Ext.Ajax.request({",
                    "",
                    "        url : url,",
                    "        method : 'POST',",
                    "        jsonData :requestData,",
                    "        success : function (response) {",
                    "",
                    "            var json1 = Ext.util.JSON.decode(response.responseText);",
                    "            var json2 = Ext.util.JSON.decode(json1.d);",
                    "",
                    "",
                    "            Ext.AnimationHelper.HideLoading();",
                    "",
                    "",
                    "",
                    "",
                    "            // add markers",
                    "",
                    "            map.addEventListener(plugin.google.maps.event.MAP_READY, function() {",
                    "",
                    "",
                    "",
                    "",
                    "                map.addMarker({",
                    "                    'position': new plugin.google.maps.LatLng(25.3033825, 51.5092886),",
                    "                    'title': \"الميرة\",",
                    "                    'snippet': \"فرع فريج بن عمران\",",
                    "                    animation: plugin.google.maps.Animation.DROP",
                    "                }, function(marker) {",
                    "                    marker.showInfoWindow();",
                    "                    marker.addEventListener(plugin.google.maps.event.MARKER_CLICK, function() {",
                    "                        alert(\"Marker is clicked\");",
                    "                    });",
                    "",
                    "                });",
                    "",
                    "",
                    "",
                    "",
                    "                map.addMarker({",
                    "                    'position': new plugin.google.maps.LatLng(25.3033825, 51.529458),",
                    "                    'title': \"الميرة\",",
                    "                    'snippet': \"فرع الدفنة\",",
                    "                    animation: plugin.google.maps.Animation.DROP",
                    "                }, function(marker) {",
                    "                    marker.showInfoWindow();",
                    "                    marker.addEventListener(plugin.google.maps.event.MARKER_CLICK, function() {",
                    "                        alert(\"Marker is clicked\");",
                    "                    });",
                    "",
                    "                });",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "                map.addMarker({",
                    "                    'position': new plugin.google.maps.LatLng(25.3040033,51.5294588),",
                    "                    'title': \"الميرة\",",
                    "                    'snippet': \"فرع المنتزه\",",
                    "                    animation: plugin.google.maps.Animation.DROP",
                    "                }, function(marker) {",
                    "                    marker.showInfoWindow();",
                    "                    marker.addEventListener(plugin.google.maps.event.MARKER_CLICK, function() {",
                    "                        alert(\"Marker is clicked\");",
                    "                    });",
                    "",
                    "                });",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "            });",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "        },",
                    "        failure: function(request, resp) {",
                    "            alert(\"in failure\");",
                    "        }",
                    "    });",
                    "",
                    "",
                    "",
                    "*/",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "}, 100,this);",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    ""
                ],
                "name": "initialize"
            },
            "name": "onSupplyServiceView2Initialize",
            "designerId": "d1d27db0-3a64-48ed-a03a-86b07e468631"
        }
    ]
}