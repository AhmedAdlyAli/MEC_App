{
    "type": "Ext.form.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "cls": [
            "complaint-view"
        ],
        "designer|userAlias": "PrintOffsView1",
        "designer|userClassName": "PrintOffsView1",
        "enableSubmissionForm": false,
        "fullscreen": null,
        "id": "PrintOffsView1",
        "itemId": "PrintOffsView1",
        "layout": "vbox",
        "pinHeaders": null,
        "scrollable": null,
        "url": null
    },
    "name": "ComplaintsView1",
    "configAlternates": {
        "scrollable": "object",
        "pinHeaders": "boolean"
    },
    "designerId": "99f35d15-f4bb-45b7-ba83-452bed8bf276",
    "customConfigs": [
        {
            "group": "(Custom Properties)",
            "name": "pinHeaders",
            "type": "string"
        }
    ],
    "cn": [
        {
            "type": "Ext.Label",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "cls": [
                    "inners-title"
                ],
                "html": "طلب مستخرجات",
                "itemId": "lblTitle"
            },
            "name": "MyLabel3",
            "designerId": "02889198-f1c8-4429-a949-a05aea44bcc4"
        },
        {
            "type": "Ext.form.FieldSet",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "height": null,
                "itemId": "fsForm",
                "layout|flex": 1,
                "modal": null,
                "scrollable": [
                    "{",
                    "                    direction: 'vertical',",
                    "                    directionLock: true",
                    "                }"
                ],
                "title": null
            },
            "name": "MyFieldSet1",
            "configAlternates": {
                "scrollable": "object"
            },
            "designerId": "04319e39-ab4f-42a3-8723-6a1c13cba9c0",
            "cn": [
                {
                    "type": "Ext.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "id": null,
                        "itemId": "companyName",
                        "label": "اسم الشركة",
                        "labelAlign": null,
                        "name": "companyName",
                        "placeHolder": "اسم الشركة",
                        "readOnly": true,
                        "required": true
                    },
                    "name": "MyTextField2",
                    "designerId": "13212168-3710-4c5f-a507-22f5f46ba05f",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onCompanyNameInitialize",
                                "implHandler": [
                                    "",
                                    "// Create Native drop down",
                                    "var me = this;",
                                    "",
                                    "",
                                    "",
                                    "me.element.on('tap', function(){",
                                    "",
                                    "",
                                    "    var data = me.up('PrintOffsView1').getData();",
                                    "",
                                    "",
                                    "",
                                    "    var items = [];",
                                    "",
                                    "    Ext.each(data, function(item){",
                                    "",
                                    "        if(Ext.Global.LanguageFlag=='ar')",
                                    "            items.push({ text: item.establishmentArabicName, value: item.commercialRegistration });",
                                    "        else",
                                    "            items.push({ text: item.establishmentEnglishName, value: item.commercialRegistration });",
                                    "    });",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "    var btn = this;",
                                    "    var config = {",
                                    "        title: Ext.Localization.GetMessage('EstName'),",
                                    "        items: items,",
                                    "        doneButtonLabel: Ext.Localization.GetMessage('Choose'),",
                                    "        cancelButtonLabel: Ext.Localization.GetMessage('Cancel')",
                                    "    };",
                                    "",
                                    "",
                                    "    var hiddenCompanyCR = Ext.ComponentQuery.query(\"#hiddenCompanyCR\")[0];",
                                    "",
                                    "    Ext.DeviceController.ShowNativePickerWithValue(me, hiddenCompanyCR,config);",
                                    "",
                                    "",
                                    "}, me);",
                                    "",
                                    ""
                                ],
                                "name": "initialize"
                            },
                            "name": "onCompanyNameInitialize",
                            "designerId": "d7853177-ae7c-41b9-9b0b-e8dc838fb439"
                        }
                    ]
                },
                {
                    "type": "Ext.field.Hidden",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "itemId": "hiddenCompanyCR",
                        "name": "hiddenCompanyCR",
                        "value": [
                            "21"
                        ]
                    },
                    "name": "MyHiddenField2",
                    "designerId": "00bb992f-3301-41b6-8775-87e5c0484a4e"
                },
                {
                    "type": "Ext.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "id": null,
                        "itemId": "txtPrintoutType",
                        "label": "نوع المستخرج",
                        "labelAlign": null,
                        "name": "txtPrintoutType",
                        "placeHolder": "نوع المستخرج",
                        "readOnly": true
                    },
                    "name": "MyTextField3",
                    "designerId": "04b46beb-3f69-4317-b9c8-8b540546b639",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onTxtPrintoutTypeInitialize",
                                "implHandler": [
                                    "",
                                    "// Create Native drop down",
                                    "var me = this;",
                                    "",
                                    "me.element.on('tap', function(){",
                                    "",
                                    "    var btn = this;",
                                    "    var config = {",
                                    "        title: Ext.Localization.GetMessage('PrintType'),",
                                    "        items: [",
                                    "",
                                    "            { text: Ext.Localization.GetMessage('CRPrint') , value: \"51\" },",
                                    "            { text: Ext.Localization.GetMessage('CRPrint2'), value: \"52\" },",
                                    "            { text: Ext.Localization.GetMessage('CRPrint3'), value: \"53\" }//,",
                                    "            //{ text: Ext.Localization.GetMessage('CRPrint4'), value: \"50\" }",
                                    "",
                                    "        ],",
                                    "        doneButtonLabel: Ext.Localization.GetMessage('Choose'),",
                                    "        cancelButtonLabel: Ext.Localization.GetMessage('Cancel')",
                                    "    };",
                                    "",
                                    "    var hiddenPrintType = Ext.ComponentQuery.query(\"#hiddenPrintoutType\")[0];",
                                    "",
                                    "    Ext.DeviceController.ShowNativePickerWithValue(me,hiddenPrintType, config);",
                                    "",
                                    "}, me);",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "",
                                    ""
                                ],
                                "name": "initialize"
                            },
                            "name": "onTxtPrintoutTypeInitialize",
                            "designerId": "357ededa-be7c-4696-9129-822af8a2361b"
                        }
                    ]
                },
                {
                    "type": "Ext.field.Hidden",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "itemId": "hiddenPrintoutType",
                        "name": "hiddenPrintoutType",
                        "value": [
                            "52"
                        ]
                    },
                    "name": "MyHiddenField",
                    "designerId": "6d3e9556-7549-4535-9780-e10d9cb272db"
                },
                {
                    "type": "Ext.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "hidden": false,
                        "id": null,
                        "itemId": "txtDeliveryMethod",
                        "label": "طريقة الاستلام",
                        "name": "txtDeliveryMethod",
                        "placeHolder": "طريقة الاستلام",
                        "readOnly": true
                    },
                    "name": "MyTextField4",
                    "designerId": "0182cc95-0e5d-41ad-b6a3-564b8a37fda1",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onTxtCategoryInitialize",
                                "implHandler": [
                                    "",
                                    "// add tab function on text field",
                                    "    var me = this;",
                                    "me.element.on('tap', function(){",
                                    "",
                                    "    var btn = this;",
                                    "    var config = {",
                                    "    title: Ext.Localization.GetMessage('DeliveryMethod') ,",
                                    "    items: [",
                                    "        { text: Ext.Localization.GetMessage('Personal') , value: \"1\" },",
                                    "        { text: Ext.Localization.GetMessage('Email'), value: \"3\" }",
                                    "",
                                    "",
                                    "    ],",
                                    "    selectedValue: \"\",",
                                    "        doneButtonLabel: Ext.Localization.GetMessage('Choose'),",
                                    "        cancelButtonLabel: Ext.Localization.GetMessage('Cancel')",
                                    "    };",
                                    "",
                                    "",
                                    "    var hiddenDeliveryMethod = Ext.ComponentQuery.query(\"#hiddenDeliveryMethod\")[0];",
                                    "",
                                    "    Ext.DeviceController.ShowNativePickerWithValue(me,hiddenDeliveryMethod, config);",
                                    "",
                                    "",
                                    "}, me);",
                                    "",
                                    "",
                                    ""
                                ],
                                "name": "initialize"
                            },
                            "name": "onTxtCategoryInitialize",
                            "designerId": "7bd52c3e-2470-4b63-9f41-03f5ade53ff3"
                        }
                    ]
                },
                {
                    "type": "Ext.field.Hidden",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "itemId": "hiddenDeliveryMethod",
                        "name": "hiddenDeliveryMethod",
                        "value": [
                            "01"
                        ]
                    },
                    "name": "MyHiddenField1",
                    "designerId": "f5e25fcd-6105-4dc3-a651-2e47617b84fd"
                },
                {
                    "type": "Ext.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "id": null,
                        "itemId": "txtNoOfCopies",
                        "label": "عدد النسخ",
                        "labelAlign": null,
                        "name": "txtNoOfCopies",
                        "placeHolder": "عدد النسخ"
                    },
                    "name": "MyTextField1",
                    "designerId": "636a93be-291f-46bb-967d-7895e60ada0f"
                },
                {
                    "type": "Ext.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "cls": [
                            "btn-send"
                        ],
                        "id": null,
                        "itemId": "btnPrintoffsNext",
                        "text": "التالي"
                    },
                    "name": "MyButton20",
                    "designerId": "e0346d7a-ccfb-4a75-a82c-f631da38e939",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "button",
                                    "e"
                                ],
                                "fn": "handler",
                                "implHandler": [
                                    "",
                                    "// Create Case with Form Values",
                                    "",
                                    "",
                                    "// validation",
                                    "",
                                    "var view = button.up('PrintOffsView1'); //this.getPrintOffsView1();",
                                    "",
                                    "",
                                    "var formData = view.getValues();",
                                    "",
                                    "",
                                    "console.log(formData);",
                                    "",
                                    "",
                                    "var err='';",
                                    "",
                                    "",
                                    "if(formData.hiddenCompanyCR===''){",
                                    "",
                                    "    err+=\"برجاء اختيار الشركة \\n\";",
                                    "}",
                                    "",
                                    "",
                                    "",
                                    "if(formData.hiddenPrintoutType===''){",
                                    "",
                                    "    err+=\"برجاء اختيار طريقة الاستلام\";",
                                    "}",
                                    "",
                                    "",
                                    "if(formData.txtNoOfCopies===''){",
                                    "",
                                    "    err+=\"برجاء اختيار عدد النسخ\";",
                                    "}",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "if(err.length>0){",
                                    "    navigator.vibrate(300);",
                                    "",
                                    "    Ext.device.Notification.show({",
                                    "        title: 'خطأ',",
                                    "        buttons:[\"موافق\"],",
                                    "        message: err",
                                    "    });",
                                    "",
                                    "}else{",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "    Ext.AnimationHelper.ShowLoading();",
                                    "",
                                    "    var requestData = {",
                                    "        \"serviceId\": \"9\",",
                                    "        \"token\": Ext.Global.userToken,",
                                    "        \"language\": Ext.Global.LanguageFlag,",
                                    "        \"identityType\": 'QID',//Ext.Global.identityType,",
                                    "        \"identityNum\": Ext.Global.identityNum,",
                                    "        \"identityNationality\": Ext.Global.identityNationality,",
                                    "        \"commercialRegistrationNum\":view.down('#hiddenCompanyCR').getValue(),",
                                    "        \"caseType\":view.down('#hiddenPrintoutType').getValue(),",
                                    "        \"establishmentSpcId\":\"\",",
                                    "        \"caseSubType\":\"01\",",
                                    "        \"contactId\":\"\",",
                                    "        \"numOfCopies\":view.down('#txtNoOfCopies').getValue(),",
                                    "        \"moiEstablishmentNum\":\"\",",
                                    "        \"qatarChamberNum\":\"\",",
                                    "        \"commercialPermitNum\":\"\",",
                                    "        \"economicalNum\":\"\"",
                                    "    };",
                                    "",
                                    "",
                                    "",
                                    "    Ext.Ajax.request({",
                                    "",
                                    "        url : Ext.Global.GetConfig('webServiceUrl'),",
                                    "        method : 'POST',",
                                    "        jsonData :requestData,",
                                    "        success : function (response) {",
                                    "            var json = Ext.util.JSON.decode(response.responseText);",
                                    "",
                                    "            json.NoOfCopies = view.down('#txtNoOfCopies').getValue();",
                                    "",
                                    "",
                                    "            if(json.status==='Their is Active Cases for this account from the same case type !')",
                                    "            {",
                                    "",
                                    "                Ext.device.Notification.show({",
                                    "                    title: Ext.Localization.GetMessage('Error'),",
                                    "                    buttons: [Ext.Localization.GetMessage('OK')],",
                                    "                    message: Ext.Localization.GetMessage('ActiveRequestError')",
                                    "                });",
                                    "",
                                    "",
                                    "            }else{",
                                    "",
                                    "",
                                    "                console.log(json);",
                                    "",
                                    "",
                                    "                Ext.Viewport.getActiveItem().push({",
                                    "                    xtype: 'PrintOffsView2',",
                                    "                    title: Ext.Global.GetFixedTitle(),",
                                    "                    data: json",
                                    "                });",
                                    "",
                                    "",
                                    "            }",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "            Ext.AnimationHelper.HideLoading();",
                                    "",
                                    "",
                                    "        }",
                                    "    });",
                                    "",
                                    "",
                                    "}",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "",
                                    "",
                                    ""
                                ]
                            },
                            "name": "handler",
                            "designerId": "b625a7f6-f6da-41a7-9cd1-1d2edb8d1968"
                        }
                    ]
                }
            ]
        },
        {
            "type": "fixedfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "initialize",
                "implHandler": [
                    "Ext.Localization.LocalizeView(this);",
                    "",
                    "",
                    "",
                    "",
                    "Ext.AnimationHelper.ShowLoading();",
                    "",
                    "",
                    "var requestData = {",
                    "    \"serviceId\": \"2\",",
                    "    \"token\": Ext.Global.userToken,",
                    "    \"language\": Ext.Global.LanguageFlag,",
                    "    \"identityType\":'QID',",
                    "    \"identityNum\": Ext.Global.identityNum,",
                    "    \"identityNationality\":  Ext.Global.identityNationality",
                    "};",
                    "",
                    "",
                    "var me = this;",
                    "",
                    "Ext.Ajax.request({",
                    "",
                    "    url : Ext.Global.GetConfig('webServiceUrl'),",
                    "    method : 'POST',",
                    "    jsonData :requestData,",
                    "    success : function (response) {",
                    "",
                    "        var json = Ext.util.JSON.decode(response.responseText);",
                    "",
                    "",
                    "        //var view = me.getPrintOffsView1();",
                    "",
                    "        me.setData(json.listOfPrimaryEstablishment.primaryEstablishment);",
                    "",
                    "        Ext.AnimationHelper.HideLoading();",
                    "",
                    "",
                    "",
                    "",
                    "    }",
                    "});",
                    "",
                    "",
                    "",
                    "this.callParent();"
                ]
            },
            "name": "initialize",
            "designerId": "f8922a4d-48b1-4e98-8f57-a1b6032d1718"
        }
    ]
}